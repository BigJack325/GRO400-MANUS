jobs:
  include:
  
  - stage: Arduino
    name: "Arduino"
    
    language: python
    python:
      - "3.9"

    cache:
      directories:
        - "~/.platformio"

    env:
      - PLATFORMIO_CI_SRC=Hexapod-master/Hexapod_Arduino


    install:
      - pip install -U platformio

    script:
      - platformio run -d $PLATFORMIO_CI_SRC
      
    
#    Qt doesn't work because armv7docker image couldn't be found
      
  - stage: Qt
    name: "Qt"
    
    arch:
    - armv71
    
    sudo: required

    services:
      - docker

    before_script:
      - docker buildx build --platform linux/arm/v7 .

    script:
      - docker run -it make check
